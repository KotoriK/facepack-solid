{"version":3,"file":"index.js","sources":["../src/style.ts","../src/util/isImage.ts","../src/peak/Peak.tsx","../src/util/template.ts","../src/renderer/renderer.ts","../src/selector/components/Tabs.tsx","../src/selector/context.ts","../static/Ripple-1.3s-237px.svg","../static/error.svg","../src/store/style.ts","../src/selector/components/Indicator.tsx","../src/selector/components/FaceView.tsx","../src/selector/components/FlexboxView.tsx","../src/selector/components/FaceSelector.tsx","../src/FacePackage.ts","../src/util/importJSON.ts","../src/FacePacksImporter.ts","../template/SakurairoDeployer.tsx"],"sourcesContent":["import { css } from \"@emotion/css\";\n/**\n * 定义主体最大高度\n */\nexport const mainHeight = 325\n\nexport const borderShadow = css({\n    boxShadow: '2px 2px 15px #888888',\n    border: '0.5px #888888 solid',\n    zIndex: 999,\n})\nexport const bgWhiteBlur = css({\n    backgroundColor: 'rgba(255,255,255,0.6)',\n    backdropFilter: 'blur(3px)'\n})\n","export const REG_IMAGE = /\\.(jpg|png|gif)$/i","import * as generic from '../style';\nimport { css } from '@emotion/css';\nimport { createEffect, createSignal, JSX, onCleanup } from 'solid-js';\nimport { autoUpdate, computePosition } from '@floating-ui/dom'\nimport { REG_IMAGE } from '../util/isImage';\n\nexport interface PeakProps {\n    /**\n     * 未提供时不会渲染\n     */\n    src?: string\n    descr?: string\n/*     show: boolean\n */    class?: string\n    anchor?: HTMLElement\n}\n\nconst styleFigCaption = css({\n    textAlign: \"center\", backgroundColor: 'rgba(255,255,255,0.65)'\n})\nconst styleHr = css({\n    marginTop: 0, marginBottom: 0\n})\nconst styleFace = css({\n    minWidth: 200,\n    height: 200\n})\n\nexport function Peak(props: PeakProps) {\n    const [style, setStyle] = createSignal<JSX.CSSProperties>({\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        width: 'max-content',\n        \"min-width\": 'auto'\n    })\n    let refSelf: HTMLElement | undefined\n\n    const updatePosition = async () => {\n        const position = await computePosition(\n            props.anchor!,\n            refSelf!,\n            {\n                placement: \"right-start\",\n            }\n        )\n        setStyle((prevStyle) => {\n            return {\n                ...prevStyle,\n                left: `${position.x}px`,\n                top: `${position.y}px`,\n            }\n        })\n    }\n    let cleanup: (() => void) | undefined\n    onCleanup(() => cleanup?.())\n\n    createEffect(async () => {\n        if (props.anchor && refSelf) {\n            cleanup = autoUpdate(\n                props.anchor,\n                refSelf,\n                updatePosition\n            );\n        } else {\n            cleanup?.();\n            cleanup = undefined\n        }\n    })\n    const show = () => Boolean(props.src) /* && props.show */\n    const isImage = () => Boolean(props.src?.match(REG_IMAGE))\n    return (\n        <figure style={{ display: show() ? 'block' : 'none',/*  ...props.style */ ...style() }}\n            classList={{\n                ...props.class ? { [props.class]: true } : {},\n                [generic.borderShadow]: true,\n                [generic.bgWhiteBlur]: true,\n            }}\n            ref={refSelf}\n        >\n            {isImage() ? <img class={styleFace} src={props.src} /> : <video playsinline loop muted autoplay class={styleFace} src={props.src} />}\n            <hr class={styleHr} />\n            <figcaption\n                classList={{\n                    [styleFigCaption]: true,\n                    [generic.bgWhiteBlur]: true,\n                }}\n            >\n                {props.descr}\n            </figcaption>\n        </figure>\n    );\n}","export function processTemplate(left_bracket: string, right_bracket: string, replacePlaceHolder: (str: string) => string, str: string) {\n    let inBracket = false, newText = \"\", bracketContent = \"\"\n    for (const char of str) {\n        switch (char) {\n            case left_bracket:\n                if (inBracket) {\n                    if (left_bracket == right_bracket) {\n                        inBracket = false\n                        newText += replacePlaceHolder(bracketContent)\n                        bracketContent = \"\"\n                    } else {\n                        inBracket = false\n                        newText += `${left_bracket}${bracketContent}${left_bracket}`\n                        bracketContent = \"\"\n                    }\n                } else {\n                    inBracket = true\n                }\n                break\n            case right_bracket:\n                if (inBracket) {\n                    inBracket = false\n                    newText += replacePlaceHolder(bracketContent)\n                    bracketContent = \"\"\n                } else {\n                    newText += char\n                }\n                break\n            case ' ':\n            case '\\n':\n            case '\\r':\n            case '\\t':\n            case '\\v':\n            case '\\f':\n                //跳过空白字符\n                //取消状态并放回字符\n                if (inBracket) {\n                    inBracket = false\n                    newText += `${left_bracket}${bracketContent}${char}`\n                    bracketContent = \"\"\n                } else {\n                    newText += char\n                }\n                break\n\n            default:\n                if (inBracket) {\n                    bracketContent += char\n                } else {\n                    newText += char\n                }\n        }\n    }\n    //for end\n    if (bracketContent != '') {\n        newText += left_bracket + bracketContent\n        inBracket = false\n    }\n    if (inBracket) {\n        newText += left_bracket\n    }\n    return newText\n}","import { FacePackage } from \"../FacePackage\"\nimport { REG_IMAGE } from \"../util/isImage\"\nimport { processTemplate } from \"../util/template\"\n/**\n * 可选字段\n */\ninterface FaceRendererPropOptional {\n    imgClassName?: string\n    imgInlineStyle?: string\n    leftBracket?: string\n    rightBracket?: string\n}\nexport interface FaceRendererProp extends FaceRendererPropOptional {\n    facePackages: Array<FacePackage>\n}\n\n/**\n * 创建渲染器\n * @param param0 \n * @returns \n */\nexport function createFaceRenderer(\n    {\n        facePackages,\n        imgClassName = '',\n        imgInlineStyle = 'max-height:6vh;',\n        leftBracket = ':',\n        rightBracket = ':'\n    }: FaceRendererProp) {\n    const map: Record<string, string> = {}\n    for (const pack of facePackages) {\n        for (const face of pack.faces) {\n            map[`${pack.id}.${face.id}`] = face.url\n        }\n    }\n    const replacePlaceHolder = (placeHolder: string) => {\n        const url = map[placeHolder]\n        if (url) {\n            if (url.match(REG_IMAGE)) {\n                return `<img class=\"${imgClassName}\" src=\"${url}\" style=\"${imgInlineStyle}\" alt=\"${leftBracket}${placeHolder}${rightBracket}\"/>`\n            } else {\n                return `<video class=\"${imgClassName}\" src=\"${url}\" style=\"${imgInlineStyle}\" title=\"${leftBracket}${placeHolder}${rightBracket}\" playsinline muted loop autoplay></video>`\n            }\n        } else {\n            return `${leftBracket}${placeHolder}${rightBracket}`\n        }\n    }\n    const renderText = (text: string) => processTemplate(leftBracket, rightBracket, replacePlaceHolder, text)\n\n    return function renderFace(displayOn: Element | string) {\n        if (typeof displayOn === 'string') {\n            return renderText(displayOn)\n        } else {\n            const raw = displayOn.innerHTML\n            const result = renderText(raw)\n            if (result !== raw) displayOn.innerHTML = result\n        }\n    }\n}","import { FacePackage } from '../../FacePackage';\nimport { bgWhiteBlur } from '../../style';\nimport { css } from '@emotion/css';\nimport { createSelector, For, JSX } from 'solid-js';\n\nexport interface TabProps extends JSX.OptionHTMLAttributes<HTMLOptionElement> {\n    pos: number\n    name: string\n    selected: boolean\n}\n/**\n *选项卡的单个标签\n *\n * @author KotoriK\n * @export\n * @param {TabProps} props\n * @returns\n */\nfunction Tab(props: TabProps) {\n    return (\n        <option selected={props.selected} style={props.style} class={props.class}\n            value={props.pos}>\n            {props.name}\n        </option>\n    )\n}\n\nexport interface TabsProps extends JSX.CustomAttributes<HTMLSelectElement> {\n    facePackages: Array<FacePackage>,\n    onSelect: (newPos: number) => void,\n    selectedPos: number\n}\n\nconst styles = css({\n    width: \"100%\", border: 0, fontWeight: 'bold'\n})\n/**\n * 选项卡的一行标签（一行Tab\n *\n * @author KotoriK\n */\nexport default function Tabs(props: TabsProps) {\n    const isSelected = createSelector(() => props.selectedPos)\n    return (\n        <select ref={props.ref}\n            classList={{ [styles]: true, [bgWhiteBlur]: true }}\n            onChange={(e) => props.onSelect(parseInt(e.currentTarget.value))}>\n            <For each={props.facePackages}>\n                {(item, index) =>\n                    <Tab pos={index()} name={item.name}\n                        selected={isSelected(index())} />\n                }\n            </For>\n        </select>\n    )\n}","import { createContext } from \"solid-js\";\nimport { Face } from \"../FacePackage\";\n\nexport const SelectorContext = createContext<SelectorContextType>()\nexport interface SelectorContextType {\n    select: (face: Face) => void,\n    inspect: (face?: Face) => void\n}","export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20style='margin:%20auto;%20background:%20none;%20display:%20block;%20shape-rendering:%20auto;'%20width='237px'%20height='237px'%20viewBox='0%200%20100%20100'%20preserveAspectRatio='xMidYMid'%3e%3ccircle%20cx='50'%20cy='50'%20r='39.4996'%20fill='none'%20stroke='%2385a2b6'%20stroke-width='3'%3e%3canimate%20attributeName='r'%20repeatCount='indefinite'%20dur='1.2987012987012987s'%20values='0;40'%20keyTimes='0;1'%20keySplines='0%200.2%200.8%201'%20calcMode='spline'%20begin='-0.6493506493506493s'%3e%3c/animate%3e%3canimate%20attributeName='opacity'%20repeatCount='indefinite'%20dur='1.2987012987012987s'%20values='1;0'%20keyTimes='0;1'%20keySplines='0.2%200%200.8%201'%20calcMode='spline'%20begin='-0.6493506493506493s'%3e%3c/animate%3e%3c/circle%3e%3ccircle%20cx='50'%20cy='50'%20r='23.8531'%20fill='none'%20stroke='%23bbcedd'%20stroke-width='3'%3e%3canimate%20attributeName='r'%20repeatCount='indefinite'%20dur='1.2987012987012987s'%20values='0;40'%20keyTimes='0;1'%20keySplines='0%200.2%200.8%201'%20calcMode='spline'%3e%3c/animate%3e%3canimate%20attributeName='opacity'%20repeatCount='indefinite'%20dur='1.2987012987012987s'%20values='1;0'%20keyTimes='0;1'%20keySplines='0.2%200%200.8%201'%20calcMode='spline'%3e%3c/animate%3e%3c/circle%3e%3c!--%20[ldio]%20generated%20by%20https://loading.io/%20--%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20t='1592208136990'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='3390'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='200'%20height='200'%3e%3cdefs%3e%3cstyle%20type='text/css'%3e%3c/style%3e%3c/defs%3e%3cpath%20d='M512%201000.727273a488.727273%20488.727273%200%201%201%20488.727273-488.727273%20488.727273%20488.727273%200%200%201-488.727273%20488.727273z%20m0-919.272728a430.545455%20430.545455%200%201%200%20430.545455%20430.545455A430.545455%20430.545455%200%200%200%20512%2081.454545z'%20fill=''%20p-id='3391'%3e%3c/path%3e%3cpath%20d='M721.454545%20750.545455a28.974545%2028.974545%200%200%201-20.596363-8.494546L281.6%20322.443636a29.090909%2029.090909%200%200%201%2041.192727-41.192727L742.4%20700.858182A29.090909%2029.090909%200%200%201%20721.454545%20750.545455z'%20fill=''%20p-id='3392'%3e%3c/path%3e%3cpath%20d='M302.545455%20750.545455a29.090909%2029.090909%200%200%201-20.596364-49.687273l419.258182-419.607273a29.090909%2029.090909%200%200%201%2041.192727%2041.192727L322.792727%20742.050909a28.974545%2028.974545%200%200%201-20.247272%208.494546z'%20fill=''%20p-id='3393'%3e%3c/path%3e%3c/svg%3e\"","import { createStore } from 'solid-js/store'\n\nimport PendingIndicator from '../../static/Ripple-1.3s-237px.svg'\nimport ErrorIndicator from '../../static/error.svg'\n\nexport interface FaceSelectorStyle {\n    svg: {\n        pending: string,\n        error: string\n    }\n}\nexport const [styleSetting, setStyleSetting] = createStore<FaceSelectorStyle>({} as any)\n\nexport const defaultStyle: FaceSelectorStyle = {\n    svg: {\n        pending: PendingIndicator,\n        error: ErrorIndicator,\n    }\n}\n/**\n * defaultStyle，但是从JSDelivr拉SVG\n */\nexport const defaultStyleJSDelivr: FaceSelectorStyle = {\n    svg: {\n        pending: \"https://cdn.jsdelivr.net/gh/YukiCat-Dev/FacePack/static/Ripple-1.3s-237px.svg\",\n        error: \"https://cdn.jsdelivr.net/gh/YukiCat-Dev/FacePack/static/error.svg\",\n    }\n}\n","import type { JSX } from \"solid-js/jsx-runtime\"\nimport { FaceSelectorStyle, styleSetting } from \"../../store/style\";\nimport { splitProps } from \"solid-js\";\n\nexport type IndicateLevel = keyof FaceSelectorStyle['svg']\nexport interface IndicatorProps extends Omit<JSX.ImgHTMLAttributes<HTMLImageElement>, 'src'> {\n    level: IndicateLevel\n}\n/**\n *一个指示错误的组件\n *\n * @author KotoriK\n * @export\n * @param {IndicatorProps} props\n * @returns\n */\n\nexport default function Indicator(prop: IndicatorProps) {\n    const [{ level }, otherProp] = splitProps(prop, ['level'])\n    return <img src={styleSetting.svg[level]} {...otherProp} />\n}","\nimport { createSignal, mergeProps, onCleanup, splitProps, useContext } from 'solid-js';\nimport type { JSX } from 'solid-js/jsx-runtime';\nimport { Face } from '../../FacePackage';\nimport { SelectorContext } from '../context';\nimport Indicator, { } from './Indicator';\nimport { REG_IMAGE } from '../../util/isImage';\nexport interface FaceViewProps extends Omit<JSX.ImgHTMLAttributes<HTMLImageElement> & JSX.VideoHTMLAttributes<HTMLVideoElement>, 'onPointerOut' | 'onPointerEnter' | 'onLoad' | 'onError' | 'src' | 'alt' | 'hidden'> {\n    face: Face\n}\n/**\n * 表情的渲染\n *\n * @author KotoriK\n * @param {FaceViewProps} props\n * @returns\n */\nexport default function FaceView(props: FaceViewProps) {\n    const [loaded, setLoaded] = createSignal(false)\n    const [error, setError] = createSignal(false)\n    const handleError = () => {\n        setLoaded(false)\n        setError(true)\n    }\n    const handleLoad = () => {\n        setLoaded(true)\n        setError(false)\n    }\n\n    const [local, forwardProp] = splitProps(props, ['face'])\n    const context = useContext(SelectorContext)\n    const isImage = () => local.face.url.match(REG_IMAGE)\n\n    const publicProp = {\n        src: local.face.url,\n        onClick: context?.select.bind(undefined, local.face),\n        onPointerEnter: context?.inspect.bind(undefined, local.face),\n        onPointerOut: context?.inspect.bind(undefined, undefined),\n        get hidden() { return !loaded() },\n        onError: handleError\n    }\n\n    return (\n        <>\n            {(!loaded() || error()) &&\n                <Indicator\n                    level={error() ? 'error' : 'pending'}\n                    alt={local.face.descr ?? local.face.id}\n                    style={{ /* ...props.style, */ transition: \"opacity 2s ease\" }}\n                    {...forwardProp}\n                />}\n            {isImage() ? <img {...mergeProps(publicProp, forwardProp)} alt={local.face.descr ?? local.face.id} onLoad={handleLoad} /> :\n                <FaceViewVideoAutoPlay {...mergeProps(publicProp, forwardProp)} onCanPlayThrough={handleLoad} />\n            }\n        </>\n    )\n}\n\nfunction FaceViewVideoAutoPlay(props: JSX.VideoHTMLAttributes<HTMLVideoElement> & { onCanPlayThrough: JSX.EventHandler<HTMLVideoElement, Event> }) {\n    let ref: HTMLVideoElement | undefined = undefined\n    let timer: number\n    const [local, forward] = splitProps(props, ['onCanPlayThrough'])\n\n    onCleanup(() => { cancelIdleCallback(timer) })\n\n    return <video ref={ref} {...forward}\n        muted loop playsinline\n        onCanPlayThrough={(e) => {\n            if (ref?.paused) {\n                local.onCanPlayThrough(e)\n                timer = requestIdleCallback(() => {\n                    if (!ref?.parentNode) return\n                    ref!.play()\n                }, { timeout: 2000 })\n            }\n        }} />\n}","import { css } from \"@emotion/css\";\nimport { For } from \"solid-js\";\nimport { FacePackage } from \"../../FacePackage\";\nimport FaceView from './FaceView'\n\nconst styleItem = css({\n    width: \"45px\", height: \"45px\", padding: 1\n})\nconst styleGrid = css({\n    overflow: \"auto\", minHeight: 0, flex: '1 1 0', textAlign: 'start',height:300\n})\n\nexport interface FlexboxViewProp {\n    /**\n     *\n     * 要显示的表情包\n     * @type {FacePackage}\n     * @memberof TableViewProps\n     */\n    facePackage: FacePackage\n}\n\nexport default function FlexboxView(props: FlexboxViewProp) {\n    return <div class={styleGrid}>\n        <For each={props.facePackage.faces}>\n            {\n                face => <FaceView\n                    face={face}\n                    class={styleItem} />\n            }\n        </For>\n    </div>\n\n}","import { FacePackage, Face } from '../../FacePackage';\nimport Tabs from './Tabs';\nimport FlexboxView from './FlexboxView';\nimport { createSignal, JSX } from 'solid-js';\nimport { borderShadow, bgWhiteBlur, mainHeight } from '../../style';\nimport { SelectorContext } from '../context';\nimport { FaceSelectorState } from '../../store';\nimport { css } from '@emotion/css'\n\nconst main = css({\n    padding: '2px',\n    maxHeight: mainHeight,\n    width: '100%',\n})\nconst styleInner = css({\n    minHeight:250,\n    height: '100%',\n    width: '100%',\n    display: 'flex',\n    flexDirection: 'column'\n})\nexport interface FaceSelectorProps {\n    /**\n    *  加载的表情包集\n    */\n    facePacks: Array<FacePackage>,\n    /**\n    *  实现隐藏FaceSelector的方法\n    */\n    handleHide?: ()=>void\n    /**\n    * 指示是否加载表情\n    */\n    loadContent: boolean\n    class?: string\n    style?: JSX.CSSProperties | string\n    ref?: HTMLDivElement\n    onSelect: (facePack: FacePackage, face: Face) => void\n}\n\n/**\n * 创建一个表情包选择器组件\n *\n * @author KotoriK\n * @returns 一个selectorState，和一个FaceSelector组件\n */\nexport function createFaceSelector() {\n    const [inspecting, inspect] = createSignal<Face | undefined>()\n\n    return [{\n        inspecting,\n    } as FaceSelectorState,\n    /**\n     *表情包选择器的完整主体\n     *\n     * @author KotoriK\n     * @export\n     * @param { children }\n     * @returns\n     */\n    function FaceSelector(props: FaceSelectorProps) {\n        const [_nowPackagePos, setPos] = createSignal(0)\n\n        /*     const head = useRef<HTMLSelectElement>()\n            const body = useRef<HTMLDivElement>() */\n        /*     const handleFaceSelected = useCallback((face_pos: number) => {\n                const nowPackage = facePacks[_nowPackagePos()]\n                onFaceSelected(nowPackage, nowPackage.faces[face_pos])\n                handleHide()\n            }, [handleHide, onFaceSelected, facePacks, _nowPackagePos]) */\n        /*     useEffect(() => {\n                //设定内网格高度\n                if (loadContent) body.current.style.height = classes.mainHeight - head.current.clientHeight + 'px'\n            }, [loadContent]) */\n\n        const nowPackagePos = () => {\n            const maxPos = props.facePacks.length - 1\n            const _now = _nowPackagePos()\n            if (_now > maxPos) return maxPos //防止prop发生改动带来越界\n            return _now\n        }\n\n        return <SelectorContext.Provider value={\n            {\n                select: (face) => props.onSelect(props.facePacks[nowPackagePos()], face),\n                inspect\n            }\n        }>\n            <div ref={props.ref}/* style={{ ...style }} */\n                classList={props.class ? {\n                    [props.class]: true\n                } : {\n                    [borderShadow]: true,\n                    [bgWhiteBlur]: true,\n                    [main]: true\n                }}\n                style={props.style}\n            >\n                <div class={styleInner}>\n                    <Tabs facePackages={props.facePacks}\n                        selectedPos={nowPackagePos()}\n                        onSelect={setPos}\n                    />\n                    {\n                        props.loadContent &&\n                        <FlexboxView facePackage={props.facePacks[nowPackagePos()]} />\n                    }\n                </div>\n            </div>\n        </SelectorContext.Provider>\n    }] as const\n}","import { processTemplate } from \"./util/template\";\n\nexport interface FacePackage {\n    id: string\n\n    /**\n     * 表情包的友好名称\n     *\n     * @type {string}\n     * @memberof FacePackage\n     */\n    name: string\n    faces: Array<Face>\n    p_url?: string\n    default?: string\n}\nexport interface FacePackageDefine {\n    id: string\n\n    /**\n     * 表情包的友好名称\n     *\n     * @type {string}\n     * @memberof FacePackage\n     */\n    name: string\n    faces: Array<FaceDefine>\n    p_url?: string\n    default?: string\n}\nexport interface Face {\n\n    /**\n     * 与php方互通的表情id\n     *\n     * @type {string}\n     * @memberof Face\n     */\n    id: string\n\n    /**\n     *\n     * 表情的url\n     * @type {string}\n     * @memberof Face\n     */\n    url: string\n\n    /**\n     * 表情描述\n     */\n    descr?: string\n\n}\nexport type FaceDefine = {\n    id: string\n    url?: string\n} | string\nexport function getFaceFullUrl(face: FaceDefine, parentPack: FacePackageDefine | FacePackage) {\n    const _face = typeof face == \"string\" ? { id: face } : face\n    const _process = (ph: string) => processTemplate('{', '}', (str) => {\n        if (str == 'id') {\n            return _face.id\n        } else if (str in parentPack) {\n            return parentPack[str as keyof typeof parentPack] as string\n        } else {\n            return `{${str}}`\n        }\n    }, ph)\n    const { url, ...other_key } = _face\n    return {\n        ...other_key, url: _process(url && _process(url) || parentPack.default!)\n    }\n}","export const importJSON =\n    (url: string) => fetch(url)\n        .then(\n            (response) => {\n                if (response.ok) {\n                    return response.json()\n                } else {\n                    throw new Error(`Fetch Error:Return HTTP ${response.status}, ${response.statusText}`)\n                }\n            }\n        )\n","import { importJSON } from './util/importJSON'\nimport { FacePackage, FacePackageDefine, getFaceFullUrl } from './FacePackage'\nexport async function importExternalFacePacks(url: string) {\n    const json: Array<FacePackageDefine> = await importJSON(url)\n    if (json) {\n        preprocessFacePack(json)\n        return json as Array<FacePackage>\n    }\n    throw new Error(`Try to load FacePacks from '${url}' failed.`)\n}\nexport function preprocessFacePack(facepacks: Array<FacePackageDefine>) {\n    for (const pack of facepacks) {\n        pack.faces = pack.faces.map((face) => getFaceFullUrl(face, pack))\n    }\n}","import { createSignal, } from 'solid-js'\nimport { render } from 'solid-js/web'\nimport { createFaceRenderer, defaultStyle, FacePackage, setStyleSetting } from '../src'\nimport { Peak } from '../src/peak'\nimport { createFaceSelector } from '../src/selector/components/FaceSelector'\n\nexport function deployRenderer(facePackages: FacePackage[]) {\n    const render = createFaceRenderer({\n        facePackages: facePackages\n    })\n    setStyleSetting(defaultStyle)\n\n    document.querySelectorAll('article.hentry p:not(.ct-respond-form-textarea):not(.form-submit)').forEach(render)\n}\nexport function deploySelector(facePackages: FacePackage[]) {\n    const emotionBox: HTMLElement | null = document.querySelector<HTMLElement>('.emotion-box')!\n    const commentArea: HTMLTextAreaElement | HTMLInputElement | null = document.querySelector('#comment')!\n    if (emotionBox && commentArea) {\n        document.querySelector('.motion-switcher-table th:last-child')?.insertAdjacentHTML('afterend', `<th onclick=\"motionSwitch('.custom')\" class=\"custom-bar\">YukiCat 特供</th>`)\n        const container = document.createElement('div')\n        container.className = 'custom-container'\n        container.style.cssText = \"display:none;height:110px;overflow-y:auto;width:100%;\"\n        emotionBox.append(container)\n        const [{ inspecting }, FaceSelector] = createFaceSelector()\n/*         const [hide, setHide] = createSignal(true)\n */        const [loadContent, setLoadContent] = createSignal(false)\n\n        render(() => <FaceSelector facePacks={facePackages}\n            loadContent={loadContent()}\n          //  handleHide={() => setHide(true)}\n/*             style={`display:${hide() ? 'none' : 'block'}`}\n */            onSelect={(pack, face) => {\n                // 替换当前选中部分的文本\n                const insertion = `:${pack.id}.${face.id}:`\n                if (commentArea.selectionStart === null) {\n                    return\n                }\n                // from Sakurairo-Script grin()\n                if (commentArea.selectionStart || commentArea.selectionStart === 0) {\n                    const startPos = commentArea.selectionStart,\n                        endPos = commentArea.selectionEnd!\n                    let cursorPos = endPos;\n                    commentArea.value = commentArea.value.substring(0, startPos) + insertion + commentArea.value.substring(endPos, commentArea.value.length);\n                    cursorPos += insertion.length;\n                    commentArea.focus();\n                    commentArea.selectionStart = cursorPos;\n                    commentArea.selectionEnd = cursorPos;\n                } else {\n                    commentArea.value += insertion;\n                    commentArea.focus();\n                }\n                // end quote\n            }} />, container)\n        // init toggler\n        document.getElementById('emotion-toggle')?.addEventListener('click', () => {\n            setLoadContent(true)\n/*             setHide(prev => !prev)\n */        }, { once: true })\n\n        // init Peak\n        const peak = document.createElement('div')\n        document.body.append(peak)\n        render(() => {\n            const imgCaption = () => {\n                const face = inspecting()\n                return face ? (face.descr ?? face.id) : undefined\n            }\n            return <Peak src={inspecting()?.url} descr={imgCaption()} anchor={emotionBox!} />\n        }, peak)\n    }\n}"],"names":["styleFigCaption","css","textAlign","backgroundColor","styleHr","marginTop","marginBottom","styleFace","minWidth","height","Peak","props","style","setStyle","createSignal","position","top","left","width","refSelf","updatePosition","computePosition","anchor","placement","prevStyle","x","y","cleanup","onCleanup","createEffect","autoUpdate","undefined","show","Boolean","src","isImage","match","REG_IMAGE","_el$","_tmpl$","_el$2","firstChild","_el$3","nextSibling","_ref$","_$use","_$insert","_c$","_$memo","_el$4","_tmpl$2","_$className","_$effect","_$setAttribute","_el$5","_tmpl$3","descr","_p$","_v$","display","_v$2","class","generic","_v$3","e","_$style","t","_$classList","a","Tab","name","selected","value","pos","styles","border","fontWeight","Tabs","isSelected","createSelector","selectedPos","addEventListener","onSelect","parseInt","currentTarget","ref","_$createComponent","For","each","facePackages","children","item","index","_$p","bgWhiteBlur","Indicator","prop","level","otherProp","splitProps","_$spread","_$mergeProps","styleSetting","svg","FaceView","loaded","setLoaded","error","setError","handleError","handleLoad","local","forwardProp","context","useContext","SelectorContext","face","url","publicProp","onClick","select","bind","onPointerEnter","inspect","onPointerOut","hidden","onError","alt","id","transition","_c$2","mergeProps","FaceViewVideoAutoPlay","onCanPlayThrough","timer","forward","cancelIdleCallback","paused","requestIdleCallback","parentNode","play","timeout","styleItem","padding","styleGrid","overflow","minHeight","flex","FlexboxView","facePackage","faces","main","maxHeight","mainHeight","styleInner","flexDirection","createFaceSelector","inspecting","FaceSelector","_nowPackagePos","setPos","nowPackagePos","maxPos","facePacks","length","_now","Provider","loadContent","borderShadow","deployRenderer","render","createFaceRenderer","setStyleSetting","defaultStyle","document","querySelectorAll","forEach","deploySelector","emotionBox","querySelector","commentArea","insertAdjacentHTML","container","createElement","className","cssText","append","setLoadContent","pack","insertion","selectionStart","startPos","endPos","selectionEnd","cursorPos","substring","focus","getElementById","once","peak","body","imgCaption"],"mappings":"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"}
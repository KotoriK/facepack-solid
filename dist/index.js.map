{"version":3,"file":"index.js","sources":["../src/style.ts","../src/util/isImage.ts","../src/peak/Peak.tsx","../src/util/template.ts","../src/renderer/renderer.ts","../src/selector/components/Tabs.tsx","../src/selector/context.ts","../static/Ripple-1.3s-237px.svg","../static/error.svg","../src/store/style.ts","../src/selector/components/Indicator.tsx","../src/selector/components/FaceView.tsx","../src/selector/components/FlexboxView.tsx","../src/selector/components/FaceSelector.tsx","../src/FacePackage.ts","../src/util/importJSON.ts","../src/FacePacksImporter.ts","../template/SakurairoDeployer.tsx"],"sourcesContent":["import { css } from \"@emotion/css\";\n/**\n * 定义主体最大高度\n */\nexport const mainHeight = 325\n\nexport const borderShadow = css({\n    boxShadow: '2px 2px 15px #888888',\n    border: '0.5px #888888 solid',\n    zIndex: 999,\n})\nexport const bgWhiteBlur = css({\n    backgroundColor: 'rgba(255,255,255,0.6)',\n    backdropFilter: 'blur(3px)'\n})\n","export const REG_IMAGE = /\\.(jpg|png|gif)$/i","import * as generic from '../style';\nimport { css } from '@emotion/css';\nimport { createEffect, createSignal, JSX, onCleanup, onMount } from 'solid-js';\nimport { autoUpdate, computePosition, flip, shift } from '@floating-ui/dom'\nimport { REG_IMAGE } from '../util/isImage';\n\nexport interface PeakProps {\n    /**\n     * 未提供时不会渲染\n     */\n    src?: string\n    descr?: string\n/*     show: boolean\n */    class?: string\n    anchor?: HTMLElement\n}\n\nconst styleFigCaption = css({\n    textAlign: \"center\", backgroundColor: 'rgba(255,255,255,0.65)'\n})\nconst styleHr = css({\n    marginTop: 0, marginBottom: 0\n})\nconst styleFace = css({\n    minWidth: 200,\n    height: 200\n})\n\nexport function Peak(props: PeakProps) {\n    const [style, setStyle] = createSignal<JSX.CSSProperties>({\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        width: 'max-content',\n        \"min-width\": 'auto'\n    })\n    let refSelf: HTMLElement | undefined\n\n    const updatePosition = async () => {\n        const position = await computePosition(\n            props.anchor!,\n            refSelf!,\n            {\n                middleware: [shift(), flip()]\n            }\n        )\n        setStyle((prevStyle) => {\n            return {\n                ...prevStyle,\n                left: `${position.x}px`,\n                top: `${position.y}px`,\n            }\n        })\n    }\n    let cleanup: (() => void) | undefined\n    onCleanup(() => cleanup?.())\n\n\n    createEffect(async () => {\n        if (props.anchor && refSelf) {\n            cleanup = autoUpdate(\n                props.anchor,\n                refSelf,\n                updatePosition\n            );\n        } else {\n            cleanup?.();\n            cleanup = undefined\n        }\n    })\n    const show = () => Boolean(props.src) /* && props.show */\n    const isImage = () => Boolean(props.src?.match(REG_IMAGE))\n    return (\n        <figure style={{ display: show() ? 'block' : 'none',/*  ...props.style */ ...style() }}\n            classList={{\n                ...props.class ? { [props.class]: true } : {},\n                [generic.borderShadow]: true,\n                [generic.bgWhiteBlur]: true,\n            }}\n            ref={refSelf}\n        >\n            {isImage() ? <img class={styleFace} src={props.src} /> : <video playsinline loop muted autoplay class={styleFace} src={props.src} />}\n            <hr class={styleHr} />\n            <figcaption\n                classList={{\n                    [styleFigCaption]: true,\n                    [generic.bgWhiteBlur]: true,\n                }}\n            >\n                {props.descr}\n            </figcaption>\n        </figure>\n    );\n}","export function processTemplate(left_bracket: string, right_bracket: string, replacePlaceHolder: (str: string) => string, str: string) {\n    let inBracket = false, newText = \"\", bracketContent = \"\"\n    for (const char of str) {\n        switch (char) {\n            case left_bracket:\n                if (inBracket) {\n                    if (left_bracket == right_bracket) {\n                        inBracket = false\n                        newText += replacePlaceHolder(bracketContent)\n                        bracketContent = \"\"\n                    } else {\n                        inBracket = false\n                        newText += `${left_bracket}${bracketContent}${left_bracket}`\n                        bracketContent = \"\"\n                    }\n                } else {\n                    inBracket = true\n                }\n                break\n            case right_bracket:\n                if (inBracket) {\n                    inBracket = false\n                    newText += replacePlaceHolder(bracketContent)\n                    bracketContent = \"\"\n                } else {\n                    newText += char\n                }\n                break\n            case ' ':\n            case '\\n':\n            case '\\r':\n            case '\\t':\n            case '\\v':\n            case '\\f':\n                //跳过空白字符\n                //取消状态并放回字符\n                if (inBracket) {\n                    inBracket = false\n                    newText += `${left_bracket}${bracketContent}${char}`\n                    bracketContent = \"\"\n                } else {\n                    newText += char\n                }\n                break\n\n            default:\n                if (inBracket) {\n                    bracketContent += char\n                } else {\n                    newText += char\n                }\n        }\n    }\n    //for end\n    if (bracketContent != '') {\n        newText += left_bracket + bracketContent\n        inBracket = false\n    }\n    if (inBracket) {\n        newText += left_bracket\n    }\n    return newText\n}","import { FacePackage } from \"../FacePackage\"\nimport { REG_IMAGE } from \"../util/isImage\"\nimport { processTemplate } from \"../util/template\"\n/**\n * 可选字段\n */\ninterface FaceRendererPropOptional {\n    imgClassName?: string\n    imgInlineStyle?: string\n    leftBracket?: string\n    rightBracket?: string\n}\nexport interface FaceRendererProp extends FaceRendererPropOptional {\n    facePackages: Array<FacePackage>\n}\n\n/**\n * 创建渲染器\n * @param param0 \n * @returns \n */\nexport function createFaceRenderer(\n    {\n        facePackages,\n        imgClassName = '',\n        imgInlineStyle = 'max-height:6vh;',\n        leftBracket = ':',\n        rightBracket = ':'\n    }: FaceRendererProp) {\n    const map: Record<string, string> = {}\n    for (const pack of facePackages) {\n        for (const face of pack.faces) {\n            map[`${pack.id}.${face.id}`] = face.url\n        }\n    }\n    const replacePlaceHolder = (placeHolder: string) => {\n        const url = map[placeHolder]\n        if (url) {\n            if (url.match(REG_IMAGE)) {\n                return `<img class=\"${imgClassName}\" src=\"${url}\" style=\"${imgInlineStyle}\" alt=\"${leftBracket}${placeHolder}${rightBracket}\"/>`\n            } else {\n                return `<video class=\"${imgClassName}\" src=\"${url}\" style=\"${imgInlineStyle}\" title=\"${leftBracket}${placeHolder}${rightBracket}\" playsinline muted loop autoplay></video>`\n            }\n        } else {\n            return `${leftBracket}${placeHolder}${rightBracket}`\n        }\n    }\n    const renderText = (text: string) => processTemplate(leftBracket, rightBracket, replacePlaceHolder, text)\n\n    return function renderFace(displayOn: Element | string) {\n        if (typeof displayOn === 'string') {\n            return renderText(displayOn)\n        } else {\n            const raw = displayOn.innerHTML\n            const result = renderText(raw)\n            if (result !== raw) displayOn.innerHTML = result\n        }\n    }\n}","import { FacePackage } from '../../FacePackage';\nimport { bgWhiteBlur } from '../../style';\nimport { css } from '@emotion/css';\nimport { createSelector, For, JSX } from 'solid-js';\n\nexport interface TabProps extends JSX.OptionHTMLAttributes<HTMLOptionElement> {\n    pos: number\n    name: string\n    selected: boolean\n}\n/**\n *选项卡的单个标签\n *\n * @author KotoriK\n * @export\n * @param {TabProps} props\n * @returns\n */\nfunction Tab(props: TabProps) {\n    return (\n        <option selected={props.selected} style={props.style} class={props.class}\n            value={props.pos}>\n            {props.name}\n        </option>\n    )\n}\n\nexport interface TabsProps extends JSX.CustomAttributes<HTMLSelectElement> {\n    facePackages: Array<FacePackage>,\n    onSelect: (newPos: number) => void,\n    selectedPos: number\n}\n\nconst styles = css({\n    width: \"100%\", border: 0, fontWeight: 'bold'\n})\n/**\n * 选项卡的一行标签（一行Tab\n *\n * @author KotoriK\n */\nexport default function Tabs(props: TabsProps) {\n    const isSelected = createSelector(() => props.selectedPos)\n    return (\n        <select ref={props.ref}\n            classList={{ [styles]: true, [bgWhiteBlur]: true }}\n            onChange={(e) => props.onSelect(parseInt(e.currentTarget.value))}>\n            <For each={props.facePackages}>\n                {(item, index) =>\n                    <Tab pos={index()} name={item.name}\n                        selected={isSelected(index())} />\n                }\n            </For>\n        </select>\n    )\n}","import { createContext } from \"solid-js\";\nimport { Face } from \"../FacePackage\";\n\nexport const SelectorContext = createContext<SelectorContextType>()\nexport interface SelectorContextType {\n    select: (face: Face) => void,\n    inspect: (face?: Face) => void\n}","export default \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHN0eWxlPSJtYXJnaW46IGF1dG87IGJhY2tncm91bmQ6IG5vbmU7IGRpc3BsYXk6IGJsb2NrOyBzaGFwZS1yZW5kZXJpbmc6IGF1dG87IiB3aWR0aD0iMjM3cHgiIGhlaWdodD0iMjM3cHgiIHZpZXdCb3g9IjAgMCAxMDAgMTAwIiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJ4TWlkWU1pZCI+PGNpcmNsZSBjeD0iNTAiIGN5PSI1MCIgcj0iMzkuNDk5NiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODVhMmI2IiBzdHJva2Utd2lkdGg9IjMiPjxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9InIiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiBkdXI9IjEuMjk4NzAxMjk4NzAxMjk4N3MiIHZhbHVlcz0iMDs0MCIga2V5VGltZXM9IjA7MSIga2V5U3BsaW5lcz0iMCAwLjIgMC44IDEiIGNhbGNNb2RlPSJzcGxpbmUiIGJlZ2luPSItMC42NDkzNTA2NDkzNTA2NDkzcyI+PC9hbmltYXRlPjxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9Im9wYWNpdHkiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiBkdXI9IjEuMjk4NzAxMjk4NzAxMjk4N3MiIHZhbHVlcz0iMTswIiBrZXlUaW1lcz0iMDsxIiBrZXlTcGxpbmVzPSIwLjIgMCAwLjggMSIgY2FsY01vZGU9InNwbGluZSIgYmVnaW49Ii0wLjY0OTM1MDY0OTM1MDY0OTNzIj48L2FuaW1hdGU+PC9jaXJjbGU+PGNpcmNsZSBjeD0iNTAiIGN5PSI1MCIgcj0iMjMuODUzMSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjYmJjZWRkIiBzdHJva2Utd2lkdGg9IjMiPjxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9InIiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiBkdXI9IjEuMjk4NzAxMjk4NzAxMjk4N3MiIHZhbHVlcz0iMDs0MCIga2V5VGltZXM9IjA7MSIga2V5U3BsaW5lcz0iMCAwLjIgMC44IDEiIGNhbGNNb2RlPSJzcGxpbmUiPjwvYW5pbWF0ZT48YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJvcGFjaXR5IiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIgZHVyPSIxLjI5ODcwMTI5ODcwMTI5ODdzIiB2YWx1ZXM9IjE7MCIga2V5VGltZXM9IjA7MSIga2V5U3BsaW5lcz0iMC4yIDAgMC44IDEiIGNhbGNNb2RlPSJzcGxpbmUiPjwvYW5pbWF0ZT48L2NpcmNsZT48IS0tIFtsZGlvXSBnZW5lcmF0ZWQgYnkgaHR0cHM6Ly9sb2FkaW5nLmlvLyAtLT48L3N2Zz4=\"","export default \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNTkyMjA4MTM2OTkwIiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjMzOTAiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PGRlZnM+PHN0eWxlIHR5cGU9InRleHQvY3NzIj48L3N0eWxlPjwvZGVmcz48cGF0aCBkPSJNNTEyIDEwMDAuNzI3MjczYTQ4OC43MjcyNzMgNDg4LjcyNzI3MyAwIDEgMSA0ODguNzI3MjczLTQ4OC43MjcyNzMgNDg4LjcyNzI3MyA0ODguNzI3MjczIDAgMCAxLTQ4OC43MjcyNzMgNDg4LjcyNzI3M3ogbTAtOTE5LjI3MjcyOGE0MzAuNTQ1NDU1IDQzMC41NDU0NTUgMCAxIDAgNDMwLjU0NTQ1NSA0MzAuNTQ1NDU1QTQzMC41NDU0NTUgNDMwLjU0NTQ1NSAwIDAgMCA1MTIgODEuNDU0NTQ1eiIgZmlsbD0iIiBwLWlkPSIzMzkxIj48L3BhdGg+PHBhdGggZD0iTTcyMS40NTQ1NDUgNzUwLjU0NTQ1NWEyOC45NzQ1NDUgMjguOTc0NTQ1IDAgMCAxLTIwLjU5NjM2My04LjQ5NDU0NkwyODEuNiAzMjIuNDQzNjM2YTI5LjA5MDkwOSAyOS4wOTA5MDkgMCAwIDEgNDEuMTkyNzI3LTQxLjE5MjcyN0w3NDIuNCA3MDAuODU4MTgyQTI5LjA5MDkwOSAyOS4wOTA5MDkgMCAwIDEgNzIxLjQ1NDU0NSA3NTAuNTQ1NDU1eiIgZmlsbD0iIiBwLWlkPSIzMzkyIj48L3BhdGg+PHBhdGggZD0iTTMwMi41NDU0NTUgNzUwLjU0NTQ1NWEyOS4wOTA5MDkgMjkuMDkwOTA5IDAgMCAxLTIwLjU5NjM2NC00OS42ODcyNzNsNDE5LjI1ODE4Mi00MTkuNjA3MjczYTI5LjA5MDkwOSAyOS4wOTA5MDkgMCAwIDEgNDEuMTkyNzI3IDQxLjE5MjcyN0wzMjIuNzkyNzI3IDc0Mi4wNTA5MDlhMjguOTc0NTQ1IDI4Ljk3NDU0NSAwIDAgMS0yMC4yNDcyNzIgOC40OTQ1NDZ6IiBmaWxsPSIiIHAtaWQ9IjMzOTMiPjwvcGF0aD48L3N2Zz4=\"","import { createStore } from 'solid-js/store'\n\nimport PendingIndicator from '../../static/Ripple-1.3s-237px.svg'\nimport ErrorIndicator from '../../static/error.svg'\n\nexport interface FaceSelectorStyle {\n    svg: {\n        pending: string,\n        error: string\n    }\n}\nexport const [styleSetting, setStyleSetting] = createStore<FaceSelectorStyle>({} as any)\n\nexport const defaultStyle: FaceSelectorStyle = {\n    svg: {\n        pending: PendingIndicator,\n        error: ErrorIndicator,\n    }\n}\n/**\n * defaultStyle，但是从JSDelivr拉SVG\n */\nexport const defaultStyleJSDelivr: FaceSelectorStyle = {\n    svg: {\n        pending: \"https://cdn.jsdelivr.net/gh/YukiCat-Dev/FacePack/static/Ripple-1.3s-237px.svg\",\n        error: \"https://cdn.jsdelivr.net/gh/YukiCat-Dev/FacePack/static/error.svg\",\n    }\n}\n","import type { JSX } from \"solid-js/jsx-runtime\"\nimport { FaceSelectorStyle, styleSetting } from \"../../store/style\";\nimport { splitProps } from \"solid-js\";\n\nexport type IndicateLevel = keyof FaceSelectorStyle['svg']\nexport interface IndicatorProps extends Omit<JSX.ImgHTMLAttributes<HTMLImageElement>, 'src'> {\n    level: IndicateLevel\n}\n/**\n *一个指示错误的组件\n *\n * @author KotoriK\n * @export\n * @param {IndicatorProps} props\n * @returns\n */\n\nexport default function Indicator(prop: IndicatorProps) {\n    const [{ level }, otherProp] = splitProps(prop, ['level'])\n    return <img src={styleSetting.svg[level]} {...otherProp} />\n}","\nimport { createSignal, mergeProps, onCleanup, splitProps, useContext } from 'solid-js';\nimport type { JSX } from 'solid-js/jsx-runtime';\nimport { Face } from '../../FacePackage';\nimport { SelectorContext } from '../context';\nimport Indicator, { } from './Indicator';\nimport { REG_IMAGE } from '../../util/isImage';\nexport interface FaceViewProps extends Omit<JSX.ImgHTMLAttributes<HTMLImageElement> & JSX.VideoHTMLAttributes<HTMLVideoElement>, 'onPointerOut' | 'onPointerEnter' | 'onLoad' | 'onError' | 'src' | 'alt' | 'hidden'> {\n    face: Face\n}\n/**\n * 表情的渲染\n *\n * @author KotoriK\n * @param {FaceViewProps} props\n * @returns\n */\nexport default function FaceView(props: FaceViewProps) {\n    const [loaded, setLoaded] = createSignal(false)\n    const [error, setError] = createSignal(false)\n    const handleError = () => {\n        setLoaded(false)\n        setError(true)\n    }\n    const handleLoad = () => {\n        setLoaded(true)\n        setError(false)\n    }\n\n    const [local, forwardProp] = splitProps(props, ['face'])\n    const context = useContext(SelectorContext)\n    const isImage = () => local.face.url.match(REG_IMAGE)\n\n    const publicProp = {\n        src: local.face.url,\n        onClick: context?.select.bind(undefined, local.face),\n        onPointerEnter: context?.inspect.bind(undefined, local.face),\n        onPointerOut: context?.inspect.bind(undefined, undefined),\n        get hidden() { return !loaded() },\n        onError: handleError\n    }\n\n    return (\n        <>\n            {(!loaded() || error()) &&\n                <Indicator\n                    level={error() ? 'error' : 'pending'}\n                    alt={local.face.descr ?? local.face.id}\n                    style={{ /* ...props.style, */ transition: \"opacity 2s ease\" }}\n                    {...forwardProp}\n                />}\n            {isImage() ? <img {...mergeProps(publicProp, forwardProp)} alt={local.face.descr ?? local.face.id} onLoad={handleLoad} /> :\n                <FaceViewVideoAutoPlay {...mergeProps(publicProp, forwardProp)} onCanPlayThrough={handleLoad} />\n            }\n        </>\n    )\n}\n\nfunction FaceViewVideoAutoPlay(props: JSX.VideoHTMLAttributes<HTMLVideoElement> & { onCanPlayThrough: JSX.EventHandler<HTMLVideoElement, Event> }) {\n    let ref: HTMLVideoElement | undefined = undefined\n    let timer: number\n    const [local, forward] = splitProps(props, ['onCanPlayThrough'])\n\n    onCleanup(() => { cancelIdleCallback(timer) })\n\n    return <video ref={ref} {...forward}\n        muted loop playsinline\n        onCanPlayThrough={(e) => {\n            if (ref?.paused) {\n                local.onCanPlayThrough(e)\n                timer = requestIdleCallback(() => {\n                    if (!ref?.parentNode) return\n                    ref!.play()\n                }, { timeout: 2000 })\n            }\n        }} />\n}","import { css } from \"@emotion/css\";\nimport { For } from \"solid-js\";\nimport { FacePackage } from \"../../FacePackage\";\nimport FaceView from './FaceView'\n\nconst styleItem = css({\n    width: \"45px\", height: \"45px\", padding: 1\n})\nconst styleGrid = css({\n    overflow: \"auto\", minHeight: 0, flex: '1 1 0', textAlign: 'start',height:300\n})\n\nexport interface FlexboxViewProp {\n    /**\n     *\n     * 要显示的表情包\n     * @type {FacePackage}\n     * @memberof TableViewProps\n     */\n    facePackage: FacePackage\n}\n\nexport default function FlexboxView(props: FlexboxViewProp) {\n    return <div class={styleGrid}>\n        <For each={props.facePackage.faces}>\n            {\n                face => <FaceView\n                    face={face}\n                    class={styleItem} />\n            }\n        </For>\n    </div>\n\n}","import { FacePackage, Face } from '../../FacePackage';\nimport Tabs from './Tabs';\nimport FlexboxView from './FlexboxView';\nimport { createSignal, JSX } from 'solid-js';\nimport { borderShadow, bgWhiteBlur, mainHeight } from '../../style';\nimport { SelectorContext } from '../context';\nimport { FaceSelectorState } from '../../store';\nimport { css } from '@emotion/css'\n\nconst main = css({\n    padding: '2px',\n    maxHeight: mainHeight,\n    width: '100%',\n})\nconst styleInner = css({\n    minHeight:250,\n    height: '100%',\n    width: '100%',\n    display: 'flex',\n    flexDirection: 'column'\n})\nexport interface FaceSelectorProps {\n    /**\n    *  加载的表情包集\n    */\n    facePacks: Array<FacePackage>,\n    /**\n    *  实现隐藏FaceSelector的方法\n    */\n    handleHide: Function\n    /**\n    * 指示是否加载表情\n    */\n    loadContent: boolean\n    class?: string\n    style?: JSX.CSSProperties | string\n    ref?: HTMLDivElement\n    onSelect: (facePack: FacePackage, face: Face) => void\n}\n\n/**\n * 创建一个表情包选择器组件\n *\n * @author KotoriK\n * @returns 一个selectorState，和一个FaceSelector组件\n */\nexport function createFaceSelector() {\n    const [inspecting, inspect] = createSignal<Face | undefined>()\n\n    return [{\n        inspecting,\n    } as FaceSelectorState,\n    /**\n     *表情包选择器的完整主体\n     *\n     * @author KotoriK\n     * @export\n     * @param { children }\n     * @returns\n     */\n    function FaceSelector(props: FaceSelectorProps) {\n        const [_nowPackagePos, setPos] = createSignal(0)\n\n        /*     const head = useRef<HTMLSelectElement>()\n            const body = useRef<HTMLDivElement>() */\n        /*     const handleFaceSelected = useCallback((face_pos: number) => {\n                const nowPackage = facePacks[_nowPackagePos()]\n                onFaceSelected(nowPackage, nowPackage.faces[face_pos])\n                handleHide()\n            }, [handleHide, onFaceSelected, facePacks, _nowPackagePos]) */\n        /*     useEffect(() => {\n                //设定内网格高度\n                if (loadContent) body.current.style.height = classes.mainHeight - head.current.clientHeight + 'px'\n            }, [loadContent]) */\n\n        const nowPackagePos = () => {\n            const maxPos = props.facePacks.length - 1\n            const _now = _nowPackagePos()\n            if (_now > maxPos) return maxPos //防止prop发生改动带来越界\n            return _now\n        }\n\n        return <SelectorContext.Provider value={\n            {\n                select: (face) => props.onSelect(props.facePacks[nowPackagePos()], face),\n                inspect\n            }\n        }>\n            <div ref={props.ref}/* style={{ ...style }} */\n                classList={props.class ? {\n                    [props.class]: true\n                } : {\n                    [borderShadow]: true,\n                    [bgWhiteBlur]: true,\n                    [main]: true\n                }}\n                style={props.style}\n            >\n                <div class={styleInner}>\n                    <Tabs facePackages={props.facePacks}\n                        selectedPos={nowPackagePos()}\n                        onSelect={setPos}\n                    />\n                    {\n                        props.loadContent &&\n                        <FlexboxView facePackage={props.facePacks[nowPackagePos()]} />\n                    }\n                </div>\n            </div>\n        </SelectorContext.Provider>\n    }] as const\n}","import { processTemplate } from \"./util/template\";\n\nexport interface FacePackage {\n    id: string\n\n    /**\n     * 表情包的友好名称\n     *\n     * @type {string}\n     * @memberof FacePackage\n     */\n    name: string\n    faces: Array<Face>\n    p_url?: string\n    default?: string\n}\nexport interface FacePackageDefine {\n    id: string\n\n    /**\n     * 表情包的友好名称\n     *\n     * @type {string}\n     * @memberof FacePackage\n     */\n    name: string\n    faces: Array<FaceDefine>\n    p_url?: string\n    default?: string\n}\nexport interface Face {\n\n    /**\n     * 与php方互通的表情id\n     *\n     * @type {string}\n     * @memberof Face\n     */\n    id: string\n\n    /**\n     *\n     * 表情的url\n     * @type {string}\n     * @memberof Face\n     */\n    url: string\n\n    /**\n     * 表情描述\n     */\n    descr?: string\n\n}\nexport type FaceDefine = {\n    id: string\n    url?: string\n} | string\nexport function getFaceFullUrl(face: FaceDefine, parentPack: FacePackageDefine | FacePackage) {\n    const _face = typeof face == \"string\" ? { id: face } : face\n    const _process = (ph: string) => processTemplate('{', '}', (str) => {\n        if (str == 'id') {\n            return _face.id\n        } else if (str in parentPack) {\n            return parentPack[str as keyof typeof parentPack] as string\n        } else {\n            return `{${str}}`\n        }\n    }, ph)\n    const { url, ...other_key } = _face\n    return {\n        ...other_key, url: _process(url && _process(url) || parentPack.default!)\n    }\n}","export const importJSON =\n    (url: string) => fetch(url)\n        .then(\n            (response) => {\n                if (response.ok) {\n                    return response.json()\n                } else {\n                    throw new Error(`Fetch Error:Return HTTP ${response.status}, ${response.statusText}`)\n                }\n            }\n        )\n","import { importJSON } from './util/importJSON'\nimport { FacePackage, FacePackageDefine, getFaceFullUrl } from './FacePackage'\nexport async function importExternalFacePacks(url: string) {\n    const json: Array<FacePackageDefine> = await importJSON(url)\n    if (json) {\n        preprocessFacePack(json)\n        return json as Array<FacePackage>\n    }\n    throw new Error(`Try to load FacePacks from '${url}' failed.`)\n}\nexport function preprocessFacePack(facepacks: Array<FacePackageDefine>) {\n    for (const pack of facepacks) {\n        pack.faces = pack.faces.map((face) => getFaceFullUrl(face, pack))\n    }\n}","import { createSignal, } from 'solid-js'\nimport { render } from 'solid-js/web'\nimport { createFaceRenderer, defaultStyle, FacePackage, setStyleSetting } from '../src'\nimport { Peak } from '../src/peak'\nimport { createFaceSelector } from '../src/selector/components/FaceSelector'\n\nexport function deployRenderer(facePackages: FacePackage[]) {\n    const render = createFaceRenderer({\n        facePackages: facePackages\n    })\n    setStyleSetting(defaultStyle)\n\n    document.querySelectorAll('article.hentry p:not(.ct-respond-form-textarea):not(.form-submit)').forEach(render)\n}\nexport function deploySelector(facePackages: FacePackage[]) {\n    let emotionBox: HTMLElement | null\n    let commentArea: HTMLTextAreaElement | HTMLInputElement | null\n    if ((emotionBox = document.querySelector<HTMLElement>('.emotion-box'))\n        && (commentArea = document.querySelector('#comment'))\n    ) {\n        const [{ inspecting }, FaceSelector] = createFaceSelector()\n        const [hide, setHide] = createSignal(true)\n        const [loadContent, setLoadContent] = createSignal(false)\n\n        render(() => <FaceSelector facePacks={facePackages}\n            loadContent={loadContent()}\n            handleHide={() => setHide(true)}\n            style={`display:${hide() ? 'none' : 'block'}`}\n            onSelect={(pack, face) => {\n                commentArea!.value += `:${pack.id}.${face.id}:`\n            }} />, emotionBox)\n        // init toggler\n        document.getElementById('emotion-toggle')?.addEventListener('click', () => {\n            setLoadContent(true)\n            setHide(prev => !prev)\n        })\n\n        // init Peak\n        const peak = document.createElement('div')\n        document.body.append(peak)\n        render(() => {\n            const imgCaption = () => {\n                const face = inspecting()\n                return face ? (face.descr ?? face.id) : undefined\n            }\n            return <Peak src={inspecting()?.url} descr={imgCaption()} anchor={emotionBox!} />\n        }, peak)\n    }\n}"],"names":["styleFigCaption","css","textAlign","backgroundColor","styleHr","marginTop","marginBottom","styleFace","minWidth","height","Peak","props","style","setStyle","createSignal","position","top","left","width","refSelf","updatePosition","computePosition","anchor","middleware","shift","flip","prevStyle","x","y","cleanup","onCleanup","createEffect","autoUpdate","undefined","show","Boolean","src","isImage","match","REG_IMAGE","_el$","_tmpl$","_el$2","firstChild","_el$3","nextSibling","_ref$","_$use","_$insert","_c$","_$memo","_el$4","_tmpl$2","_$className","_$effect","_$setAttribute","_el$5","_tmpl$3","descr","_p$","_v$","display","_v$2","class","generic","_v$3","_$style","_$classList","Tab","name","selected","value","pos","styles","border","fontWeight","Tabs","isSelected","createSelector","selectedPos","addEventListener","e","onSelect","parseInt","currentTarget","ref","_$createComponent","For","each","facePackages","children","item","index","_$p","bgWhiteBlur","Indicator","prop","level","otherProp","splitProps","_$spread","_$mergeProps","styleSetting","svg","FaceView","loaded","setLoaded","error","setError","handleError","handleLoad","local","forwardProp","context","useContext","SelectorContext","face","url","publicProp","onClick","select","bind","onPointerEnter","inspect","onPointerOut","hidden","onError","alt","id","transition","_c$2","mergeProps","FaceViewVideoAutoPlay","onCanPlayThrough","timer","forward","cancelIdleCallback","paused","requestIdleCallback","parentNode","play","timeout","styleItem","padding","styleGrid","overflow","minHeight","flex","FlexboxView","facePackage","faces","main","maxHeight","mainHeight","styleInner","flexDirection","createFaceSelector","inspecting","FaceSelector","_nowPackagePos","setPos","nowPackagePos","maxPos","facePacks","length","_now","Provider","loadContent","borderShadow","deployRenderer","render","createFaceRenderer","setStyleSetting","defaultStyle","document","querySelectorAll","forEach","deploySelector","emotionBox","commentArea","querySelector","hide","setHide","setLoadContent","handleHide","pack","getElementById","prev","peak","createElement","body","append","imgCaption"],"mappings":"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"}
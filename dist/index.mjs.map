{"version":3,"file":"index.mjs","sources":["../src/style.ts","../src/util/isImage.ts","../src/peak/Peak.tsx","../src/util/template.ts","../src/renderer/renderer.ts","../src/selector/components/Tabs.tsx","../src/selector/context.ts","../static/Ripple-1.3s-237px.svg","../static/error.svg","../src/store/style.ts","../src/selector/components/Indicator.tsx","../src/selector/components/FaceView.tsx","../src/selector/components/FlexboxView.tsx","../src/selector/components/FaceSelector.tsx","../src/FacePackage.ts","../src/util/importJSON.ts","../src/FacePacksImporter.ts","../template/SakurairoDeployer.tsx"],"sourcesContent":["import { css } from \"@emotion/css\";\n/**\n * 定义主体最大高度\n */\nexport const mainHeight = 325\n\nexport const borderShadow = css({\n    boxShadow: '2px 2px 15px #888888',\n    border: '0.5px #888888 solid',\n    zIndex: 999,\n})\nexport const bgWhiteBlur = css({\n    backgroundColor: 'rgba(255,255,255,0.6)',\n    backdropFilter: 'blur(3px)'\n})\n","export const REG_IMAGE = /\\.(jpg|png|gif)$/i","import * as generic from '../style';\nimport { css } from '@emotion/css';\nimport { createEffect, createSignal, JSX, onCleanup, onMount } from 'solid-js';\nimport { autoUpdate, computePosition, flip, shift } from '@floating-ui/dom'\nimport { REG_IMAGE } from '../util/isImage';\n\nexport interface PeakProps {\n    /**\n     * 未提供时不会渲染\n     */\n    src?: string\n    descr?: string\n/*     show: boolean\n */    class?: string\n    anchor?: HTMLElement\n}\n\nconst styleFigCaption = css({\n    textAlign: \"center\", backgroundColor: 'rgba(255,255,255,0.65)'\n})\nconst styleHr = css({\n    marginTop: 0, marginBottom: 0\n})\nconst styleFace = css({\n    minWidth: 200,\n    height: 200\n})\n\nexport function Peak(props: PeakProps) {\n    const [style, setStyle] = createSignal<JSX.CSSProperties>({\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        width: 'max-content',\n        \"min-width\": 'auto'\n    })\n    let refSelf: HTMLElement | undefined\n\n    const updatePosition = async () => {\n        const position = await computePosition(\n            props.anchor!,\n            refSelf!,\n            {\n                middleware: [shift(), flip()]\n            }\n        )\n        setStyle((prevStyle) => {\n            return {\n                ...prevStyle,\n                left: `${position.x}px`,\n                top: `${position.y}px`,\n            }\n        })\n    }\n    let cleanup: (() => void) | undefined\n    onCleanup(() => cleanup?.())\n\n\n    createEffect(async () => {\n        if (props.anchor && refSelf) {\n            cleanup = autoUpdate(\n                props.anchor,\n                refSelf,\n                updatePosition\n            );\n        } else {\n            cleanup?.();\n            cleanup = undefined\n        }\n    })\n    const show = () => Boolean(props.src) /* && props.show */\n    const isImage = () => Boolean(props.src?.match(REG_IMAGE))\n    return (\n        <figure style={{ display: show() ? 'block' : 'none',/*  ...props.style */ ...style() }}\n            classList={{\n                ...props.class ? { [props.class]: true } : {},\n                [generic.borderShadow]: true,\n                [generic.bgWhiteBlur]: true,\n            }}\n            ref={refSelf}\n        >\n            {isImage() ? <img class={styleFace} src={props.src} /> : <video playsinline loop muted autoplay class={styleFace} src={props.src} />}\n            <hr class={styleHr} />\n            <figcaption\n                classList={{\n                    [styleFigCaption]: true,\n                    [generic.bgWhiteBlur]: true,\n                }}\n            >\n                {props.descr}\n            </figcaption>\n        </figure>\n    );\n}","export function processTemplate(left_bracket: string, right_bracket: string, replacePlaceHolder: (str: string) => string, str: string) {\n    let inBracket = false, newText = \"\", bracketContent = \"\"\n    for (const char of str) {\n        switch (char) {\n            case left_bracket:\n                if (inBracket) {\n                    if (left_bracket == right_bracket) {\n                        inBracket = false\n                        newText += replacePlaceHolder(bracketContent)\n                        bracketContent = \"\"\n                    } else {\n                        inBracket = false\n                        newText += `${left_bracket}${bracketContent}${left_bracket}`\n                        bracketContent = \"\"\n                    }\n                } else {\n                    inBracket = true\n                }\n                break\n            case right_bracket:\n                if (inBracket) {\n                    inBracket = false\n                    newText += replacePlaceHolder(bracketContent)\n                    bracketContent = \"\"\n                } else {\n                    newText += char\n                }\n                break\n            case ' ':\n            case '\\n':\n            case '\\r':\n            case '\\t':\n            case '\\v':\n            case '\\f':\n                //跳过空白字符\n                //取消状态并放回字符\n                if (inBracket) {\n                    inBracket = false\n                    newText += `${left_bracket}${bracketContent}${char}`\n                    bracketContent = \"\"\n                } else {\n                    newText += char\n                }\n                break\n\n            default:\n                if (inBracket) {\n                    bracketContent += char\n                } else {\n                    newText += char\n                }\n        }\n    }\n    //for end\n    if (bracketContent != '') {\n        newText += left_bracket + bracketContent\n        inBracket = false\n    }\n    if (inBracket) {\n        newText += left_bracket\n    }\n    return newText\n}","import { FacePackage } from \"../FacePackage\"\nimport { REG_IMAGE } from \"../util/isImage\"\nimport { processTemplate } from \"../util/template\"\n/**\n * 可选字段\n */\ninterface FaceRendererPropOptional {\n    imgClassName?: string\n    imgInlineStyle?: string\n    leftBracket?: string\n    rightBracket?: string\n}\nexport interface FaceRendererProp extends FaceRendererPropOptional {\n    facePackages: Array<FacePackage>\n}\n\n/**\n * 创建渲染器\n * @param param0 \n * @returns \n */\nexport function createFaceRenderer(\n    {\n        facePackages,\n        imgClassName = '',\n        imgInlineStyle = 'max-height:6vh;',\n        leftBracket = ':',\n        rightBracket = ':'\n    }: FaceRendererProp) {\n    const map: Record<string, string> = {}\n    for (const pack of facePackages) {\n        for (const face of pack.faces) {\n            map[`${pack.id}.${face.id}`] = face.url\n        }\n    }\n    const replacePlaceHolder = (placeHolder: string) => {\n        const url = map[placeHolder]\n        if (url) {\n            if (url.match(REG_IMAGE)) {\n                return `<img class=\"${imgClassName}\" src=\"${url}\" style=\"${imgInlineStyle}\" alt=\"${leftBracket}${placeHolder}${rightBracket}\"/>`\n            } else {\n                return `<video class=\"${imgClassName}\" src=\"${url}\" style=\"${imgInlineStyle}\" title=\"${leftBracket}${placeHolder}${rightBracket}\" playsinline muted loop autoplay></video>`\n            }\n        } else {\n            return `${leftBracket}${placeHolder}${rightBracket}`\n        }\n    }\n    const renderText = (text: string) => processTemplate(leftBracket, rightBracket, replacePlaceHolder, text)\n\n    return function renderFace(displayOn: Element | string) {\n        if (typeof displayOn === 'string') {\n            return renderText(displayOn)\n        } else {\n            const raw = displayOn.innerHTML\n            const result = renderText(raw)\n            if (result !== raw) displayOn.innerHTML = result\n        }\n    }\n}","import { FacePackage } from '../../FacePackage';\nimport { bgWhiteBlur } from '../../style';\nimport { css } from '@emotion/css';\nimport { createSelector, For, JSX } from 'solid-js';\n\nexport interface TabProps extends JSX.OptionHTMLAttributes<HTMLOptionElement> {\n    pos: number\n    name: string\n    selected: boolean\n}\n/**\n *选项卡的单个标签\n *\n * @author KotoriK\n * @export\n * @param {TabProps} props\n * @returns\n */\nfunction Tab(props: TabProps) {\n    return (\n        <option selected={props.selected} style={props.style} class={props.class}\n            value={props.pos}>\n            {props.name}\n        </option>\n    )\n}\n\nexport interface TabsProps extends JSX.CustomAttributes<HTMLSelectElement> {\n    facePackages: Array<FacePackage>,\n    onSelect: (newPos: number) => void,\n    selectedPos: number\n}\n\nconst styles = css({\n    width: \"100%\", border: 0, fontWeight: 'bold'\n})\n/**\n * 选项卡的一行标签（一行Tab\n *\n * @author KotoriK\n */\nexport default function Tabs(props: TabsProps) {\n    const isSelected = createSelector(() => props.selectedPos)\n    return (\n        <select ref={props.ref}\n            classList={{ [styles]: true, [bgWhiteBlur]: true }}\n            onChange={(e) => props.onSelect(parseInt(e.currentTarget.value))}>\n            <For each={props.facePackages}>\n                {(item, index) =>\n                    <Tab pos={index()} name={item.name}\n                        selected={isSelected(index())} />\n                }\n            </For>\n        </select>\n    )\n}","import { createContext } from \"solid-js\";\nimport { Face } from \"../FacePackage\";\n\nexport const SelectorContext = createContext<SelectorContextType>()\nexport interface SelectorContextType {\n    select: (face: Face) => void,\n    inspect: (face?: Face) => void\n}","export default \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHN0eWxlPSJtYXJnaW46IGF1dG87IGJhY2tncm91bmQ6IG5vbmU7IGRpc3BsYXk6IGJsb2NrOyBzaGFwZS1yZW5kZXJpbmc6IGF1dG87IiB3aWR0aD0iMjM3cHgiIGhlaWdodD0iMjM3cHgiIHZpZXdCb3g9IjAgMCAxMDAgMTAwIiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJ4TWlkWU1pZCI+PGNpcmNsZSBjeD0iNTAiIGN5PSI1MCIgcj0iMzkuNDk5NiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODVhMmI2IiBzdHJva2Utd2lkdGg9IjMiPjxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9InIiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiBkdXI9IjEuMjk4NzAxMjk4NzAxMjk4N3MiIHZhbHVlcz0iMDs0MCIga2V5VGltZXM9IjA7MSIga2V5U3BsaW5lcz0iMCAwLjIgMC44IDEiIGNhbGNNb2RlPSJzcGxpbmUiIGJlZ2luPSItMC42NDkzNTA2NDkzNTA2NDkzcyI+PC9hbmltYXRlPjxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9Im9wYWNpdHkiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiBkdXI9IjEuMjk4NzAxMjk4NzAxMjk4N3MiIHZhbHVlcz0iMTswIiBrZXlUaW1lcz0iMDsxIiBrZXlTcGxpbmVzPSIwLjIgMCAwLjggMSIgY2FsY01vZGU9InNwbGluZSIgYmVnaW49Ii0wLjY0OTM1MDY0OTM1MDY0OTNzIj48L2FuaW1hdGU+PC9jaXJjbGU+PGNpcmNsZSBjeD0iNTAiIGN5PSI1MCIgcj0iMjMuODUzMSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjYmJjZWRkIiBzdHJva2Utd2lkdGg9IjMiPjxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9InIiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiBkdXI9IjEuMjk4NzAxMjk4NzAxMjk4N3MiIHZhbHVlcz0iMDs0MCIga2V5VGltZXM9IjA7MSIga2V5U3BsaW5lcz0iMCAwLjIgMC44IDEiIGNhbGNNb2RlPSJzcGxpbmUiPjwvYW5pbWF0ZT48YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJvcGFjaXR5IiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIgZHVyPSIxLjI5ODcwMTI5ODcwMTI5ODdzIiB2YWx1ZXM9IjE7MCIga2V5VGltZXM9IjA7MSIga2V5U3BsaW5lcz0iMC4yIDAgMC44IDEiIGNhbGNNb2RlPSJzcGxpbmUiPjwvYW5pbWF0ZT48L2NpcmNsZT48IS0tIFtsZGlvXSBnZW5lcmF0ZWQgYnkgaHR0cHM6Ly9sb2FkaW5nLmlvLyAtLT48L3N2Zz4=\"","export default \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNTkyMjA4MTM2OTkwIiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjMzOTAiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PGRlZnM+PHN0eWxlIHR5cGU9InRleHQvY3NzIj48L3N0eWxlPjwvZGVmcz48cGF0aCBkPSJNNTEyIDEwMDAuNzI3MjczYTQ4OC43MjcyNzMgNDg4LjcyNzI3MyAwIDEgMSA0ODguNzI3MjczLTQ4OC43MjcyNzMgNDg4LjcyNzI3MyA0ODguNzI3MjczIDAgMCAxLTQ4OC43MjcyNzMgNDg4LjcyNzI3M3ogbTAtOTE5LjI3MjcyOGE0MzAuNTQ1NDU1IDQzMC41NDU0NTUgMCAxIDAgNDMwLjU0NTQ1NSA0MzAuNTQ1NDU1QTQzMC41NDU0NTUgNDMwLjU0NTQ1NSAwIDAgMCA1MTIgODEuNDU0NTQ1eiIgZmlsbD0iIiBwLWlkPSIzMzkxIj48L3BhdGg+PHBhdGggZD0iTTcyMS40NTQ1NDUgNzUwLjU0NTQ1NWEyOC45NzQ1NDUgMjguOTc0NTQ1IDAgMCAxLTIwLjU5NjM2My04LjQ5NDU0NkwyODEuNiAzMjIuNDQzNjM2YTI5LjA5MDkwOSAyOS4wOTA5MDkgMCAwIDEgNDEuMTkyNzI3LTQxLjE5MjcyN0w3NDIuNCA3MDAuODU4MTgyQTI5LjA5MDkwOSAyOS4wOTA5MDkgMCAwIDEgNzIxLjQ1NDU0NSA3NTAuNTQ1NDU1eiIgZmlsbD0iIiBwLWlkPSIzMzkyIj48L3BhdGg+PHBhdGggZD0iTTMwMi41NDU0NTUgNzUwLjU0NTQ1NWEyOS4wOTA5MDkgMjkuMDkwOTA5IDAgMCAxLTIwLjU5NjM2NC00OS42ODcyNzNsNDE5LjI1ODE4Mi00MTkuNjA3MjczYTI5LjA5MDkwOSAyOS4wOTA5MDkgMCAwIDEgNDEuMTkyNzI3IDQxLjE5MjcyN0wzMjIuNzkyNzI3IDc0Mi4wNTA5MDlhMjguOTc0NTQ1IDI4Ljk3NDU0NSAwIDAgMS0yMC4yNDcyNzIgOC40OTQ1NDZ6IiBmaWxsPSIiIHAtaWQ9IjMzOTMiPjwvcGF0aD48L3N2Zz4=\"","import { createStore } from 'solid-js/store'\n\nimport PendingIndicator from '../../static/Ripple-1.3s-237px.svg'\nimport ErrorIndicator from '../../static/error.svg'\n\nexport interface FaceSelectorStyle {\n    svg: {\n        pending: string,\n        error: string\n    }\n}\nexport const [styleSetting, setStyleSetting] = createStore<FaceSelectorStyle>({} as any)\n\nexport const defaultStyle: FaceSelectorStyle = {\n    svg: {\n        pending: PendingIndicator,\n        error: ErrorIndicator,\n    }\n}\n/**\n * defaultStyle，但是从JSDelivr拉SVG\n */\nexport const defaultStyleJSDelivr: FaceSelectorStyle = {\n    svg: {\n        pending: \"https://cdn.jsdelivr.net/gh/YukiCat-Dev/FacePack/static/Ripple-1.3s-237px.svg\",\n        error: \"https://cdn.jsdelivr.net/gh/YukiCat-Dev/FacePack/static/error.svg\",\n    }\n}\n","import type { JSX } from \"solid-js/jsx-runtime\"\nimport { FaceSelectorStyle, styleSetting } from \"../../store/style\";\nimport { splitProps } from \"solid-js\";\n\nexport type IndicateLevel = keyof FaceSelectorStyle['svg']\nexport interface IndicatorProps extends Omit<JSX.ImgHTMLAttributes<HTMLImageElement>, 'src'> {\n    level: IndicateLevel\n}\n/**\n *一个指示错误的组件\n *\n * @author KotoriK\n * @export\n * @param {IndicatorProps} props\n * @returns\n */\n\nexport default function Indicator(prop: IndicatorProps) {\n    const [{ level }, otherProp] = splitProps(prop, ['level'])\n    return <img src={styleSetting.svg[level]} {...otherProp} />\n}","\nimport { createSignal, mergeProps, onCleanup, splitProps, useContext } from 'solid-js';\nimport type { JSX } from 'solid-js/jsx-runtime';\nimport { Face } from '../../FacePackage';\nimport { SelectorContext } from '../context';\nimport Indicator, { } from './Indicator';\nimport { REG_IMAGE } from '../../util/isImage';\nexport interface FaceViewProps extends Omit<JSX.ImgHTMLAttributes<HTMLImageElement> & JSX.VideoHTMLAttributes<HTMLVideoElement>, 'onPointerOut' | 'onPointerEnter' | 'onLoad' | 'onError' | 'src' | 'alt' | 'hidden'> {\n    face: Face\n}\n/**\n * 表情的渲染\n *\n * @author KotoriK\n * @param {FaceViewProps} props\n * @returns\n */\nexport default function FaceView(props: FaceViewProps) {\n    const [loaded, setLoaded] = createSignal(false)\n    const [error, setError] = createSignal(false)\n    const handleError = () => {\n        setLoaded(false)\n        setError(true)\n    }\n    const handleLoad = () => {\n        setLoaded(true)\n        setError(false)\n    }\n\n    const [local, forwardProp] = splitProps(props, ['face'])\n    const context = useContext(SelectorContext)\n    const isImage = () => local.face.url.match(REG_IMAGE)\n\n    const publicProp = {\n        src: local.face.url,\n        onClick: context?.select.bind(undefined, local.face),\n        onPointerEnter: context?.inspect.bind(undefined, local.face),\n        onPointerOut: context?.inspect.bind(undefined, undefined),\n        get hidden() { return !loaded() },\n        onError: handleError\n    }\n\n    return (\n        <>\n            {(!loaded() || error()) &&\n                <Indicator\n                    level={error() ? 'error' : 'pending'}\n                    alt={local.face.descr ?? local.face.id}\n                    style={{ /* ...props.style, */ transition: \"opacity 2s ease\" }}\n                    {...forwardProp}\n                />}\n            {isImage() ? <img {...mergeProps(publicProp, forwardProp)} alt={local.face.descr ?? local.face.id} onLoad={handleLoad} /> :\n                <FaceViewVideoAutoPlay {...mergeProps(publicProp, forwardProp)} muted loop playsinline onCanPlay={handleLoad} />\n            }\n        </>\n    )\n}\n\nfunction FaceViewVideoAutoPlay(props: JSX.VideoHTMLAttributes<HTMLVideoElement> & { onCanPlay: JSX.EventHandler<HTMLVideoElement, Event> }) {\n    let ref: HTMLVideoElement | undefined = undefined\n    let timer: number\n    const [local, forward] = splitProps(props, ['onCanPlay'])\n\n    onCleanup(() => { clearTimeout(timer) })\n\n    return <video ref={ref} {...forward} onCanPlay={(e) => {\n        if (ref?.paused) {\n            local.onCanPlay(e)\n            timer = requestIdleCallback(() => {\n                if (document.contains(ref!)) {\n                    ref!.play()\n                }\n            }, { timeout: 1000 })\n        }\n    }} />\n}","import { css } from \"@emotion/css\";\nimport { For } from \"solid-js\";\nimport { FacePackage } from \"../../FacePackage\";\nimport FaceView from './FaceView'\n\nconst styleItem = css({\n    width: \"45px\", height: \"45px\", padding: 1\n})\nconst styleGrid = css({\n    overflow: \"auto\", minHeight: 0, flex: '1 1 0', textAlign: 'center'\n})\n\nexport interface FlexboxViewProp {\n    /**\n     *\n     * 要显示的表情包\n     * @type {FacePackage}\n     * @memberof TableViewProps\n     */\n    facePackage: FacePackage\n}\n\nexport default function FlexboxView(props: FlexboxViewProp) {\n    return <div class={styleGrid}>\n        <For each={props.facePackage.faces}>\n            {\n                face => <FaceView\n                    face={face}\n                    class={styleItem} />\n            }\n        </For>\n    </div>\n\n}","import { FacePackage, Face } from '../../FacePackage';\nimport Tabs from './Tabs';\nimport FlexboxView from './FlexboxView';\nimport { createSignal, JSX } from 'solid-js';\nimport { borderShadow, bgWhiteBlur, mainHeight } from '../../style';\nimport { SelectorContext } from '../context';\nimport { FaceSelectorState } from '../../store';\nimport { css } from '@emotion/css'\n\nconst main = css({\n    padding: '2px',\n    maxHeight: mainHeight,\n    width: '100%',\n})\nconst styleInner = css({\n    height: '100%',\n    width: '100%',\n    display: 'flex',\n    flexDirection: 'column'\n})\nexport interface FaceSelectorProps {\n    /**\n    *  加载的表情包集\n    */\n    facePacks: Array<FacePackage>,\n    /**\n    *  实现隐藏FaceSelector的方法\n    */\n    handleHide: Function\n    /**\n    * 指示是否加载表情\n    */\n    loadContent: boolean\n    class?: string\n    style?: JSX.CSSProperties | string\n    ref?: HTMLDivElement\n    onSelect: (facePack: FacePackage, face: Face) => void\n}\n\n/**\n * 创建一个表情包选择器组件\n *\n * @author KotoriK\n * @returns 一个selectorState，和一个FaceSelector组件\n */\nexport function createFaceSelector() {\n    const [inspecting, inspect] = createSignal<Face | undefined>()\n\n    return [{\n        inspecting,\n    } as FaceSelectorState,\n    /**\n     *表情包选择器的完整主体\n     *\n     * @author KotoriK\n     * @export\n     * @param { children }\n     * @returns\n     */\n    function FaceSelector(props: FaceSelectorProps) {\n        const [_nowPackagePos, setPos] = createSignal(0)\n\n        /*     const head = useRef<HTMLSelectElement>()\n            const body = useRef<HTMLDivElement>() */\n        /*     const handleFaceSelected = useCallback((face_pos: number) => {\n                const nowPackage = facePacks[_nowPackagePos()]\n                onFaceSelected(nowPackage, nowPackage.faces[face_pos])\n                handleHide()\n            }, [handleHide, onFaceSelected, facePacks, _nowPackagePos]) */\n        /*     useEffect(() => {\n                //设定内网格高度\n                if (loadContent) body.current.style.height = classes.mainHeight - head.current.clientHeight + 'px'\n            }, [loadContent]) */\n\n        const nowPackagePos = () => {\n            const maxPos = props.facePacks.length - 1\n            const _now = _nowPackagePos()\n            if (_now > maxPos) return maxPos //防止prop发生改动带来越界\n            return _now\n        }\n\n        return <SelectorContext.Provider value={\n            {\n                select: (face) => props.onSelect(props.facePacks[nowPackagePos()], face),\n                inspect\n            }\n        }>\n            <div ref={props.ref}/* style={{ ...style }} */\n                classList={props.class ? {\n                    [props.class]: true\n                } : {\n                    [borderShadow]: true,\n                    [bgWhiteBlur]: true,\n                    [main]: true\n                }}\n                style={props.style}\n            >\n                <div class={styleInner}>\n                    <Tabs facePackages={props.facePacks}\n                        selectedPos={nowPackagePos()}\n                        onSelect={setPos}\n                    />\n                    {\n                        props.loadContent &&\n                        <FlexboxView facePackage={props.facePacks[nowPackagePos()]} />\n                    }\n                </div>\n            </div>\n        </SelectorContext.Provider>\n    }] as const\n}","import { processTemplate } from \"./util/template\";\n\nexport interface FacePackage {\n    id: string\n\n    /**\n     * 表情包的友好名称\n     *\n     * @type {string}\n     * @memberof FacePackage\n     */\n    name: string\n    faces: Array<Face>\n    p_url?: string\n    default?: string\n}\nexport interface FacePackageDefine {\n    id: string\n\n    /**\n     * 表情包的友好名称\n     *\n     * @type {string}\n     * @memberof FacePackage\n     */\n    name: string\n    faces: Array<FaceDefine>\n    p_url?: string\n    default?: string\n}\nexport interface Face {\n\n    /**\n     * 与php方互通的表情id\n     *\n     * @type {string}\n     * @memberof Face\n     */\n    id: string\n\n    /**\n     *\n     * 表情的url\n     * @type {string}\n     * @memberof Face\n     */\n    url: string\n\n    /**\n     * 表情描述\n     */\n    descr?: string\n\n}\nexport type FaceDefine = {\n    id: string\n    url?: string\n} | string\nexport function getFaceFullUrl(face: FaceDefine, parentPack: FacePackageDefine | FacePackage) {\n    const _face = typeof face == \"string\" ? { id: face } : face\n    const _process = (ph: string) => processTemplate('{', '}', (str) => {\n        if (str == 'id') {\n            return _face.id\n        } else if (str in parentPack) {\n            return parentPack[str as keyof typeof parentPack] as string\n        } else {\n            return `{${str}}`\n        }\n    }, ph)\n    const { url, ...other_key } = _face\n    return {\n        ...other_key, url: _process(url && _process(url) || parentPack.default!)\n    }\n}","export const importJSON =\n    (url: string) => fetch(url)\n        .then(\n            (response) => {\n                if (response.ok) {\n                    return response.json()\n                } else {\n                    throw new Error(`Fetch Error:Return HTTP ${response.status}, ${response.statusText}`)\n                }\n            }\n        )\n","import { importJSON } from './util/importJSON'\nimport { FacePackage, FacePackageDefine, getFaceFullUrl } from './FacePackage'\nexport async function importExternalFacePacks(url: string) {\n    const json: Array<FacePackageDefine> = await importJSON(url)\n    if (json) {\n        preprocessFacePack(json)\n        return json as Array<FacePackage>\n    }\n    throw new Error(`Try to load FacePacks from '${url}' failed.`)\n}\nexport function preprocessFacePack(facepacks: Array<FacePackageDefine>) {\n    for (const pack of facepacks) {\n        pack.faces = pack.faces.map((face) => getFaceFullUrl(face, pack))\n    }\n}","import { createSignal, } from 'solid-js'\nimport { render } from 'solid-js/web'\nimport { createFaceRenderer, defaultStyle, FacePackage, setStyleSetting } from '../src'\nimport { Peak } from '../src/peak'\nimport { createFaceSelector } from '../src/selector/components/FaceSelector'\n\nexport function deployRenderer(facePackages: FacePackage[]) {\n    const render = createFaceRenderer({\n        facePackages: facePackages\n    })\n    setStyleSetting(defaultStyle)\n\n    document.querySelectorAll('article.hentry p:not(.ct-respond-form-textarea):not(.form-submit)').forEach(render)\n}\nexport function deploySelector(facePackages: FacePackage[]) {\n    let emotionBox: HTMLElement | null\n    let commentArea: HTMLTextAreaElement | HTMLInputElement | null\n    if ((emotionBox = document.querySelector<HTMLElement>('.emotion-box'))\n        && (commentArea = document.querySelector('#comment'))\n    ) {\n        const [{ inspecting }, FaceSelector] = createFaceSelector()\n        const [hide, setHide] = createSignal(true)\n        const [loadContent, setLoadContent] = createSignal(false)\n\n        render(() => <FaceSelector facePacks={facePackages}\n            loadContent={loadContent()}\n            handleHide={() => setHide(true)}\n            style={`display:${hide() ? 'none' : 'block'}`}\n            onSelect={(pack, face) => {\n                commentArea!.value += `:${pack.id}.${face.id}:`\n            }} />, emotionBox)\n        // init toggler\n        document.getElementById('emotion-toggle')?.addEventListener('click', () => {\n            setLoadContent(true)\n            setHide(prev => !prev)\n        })\n\n        // init Peak\n        const peak = document.createElement('div')\n        document.body.append(peak)\n        render(() => {\n            const imgCaption = () => {\n                const face = inspecting()\n                return face ? (face.descr ?? face.id) : undefined\n            }\n            return <Peak src={inspecting()?.url} descr={imgCaption()} anchor={emotionBox!} />\n        }, peak)\n    }\n}"],"names":["styleFigCaption","css","textAlign","backgroundColor","styleHr","marginTop","marginBottom","styleFace","minWidth","height","Peak","props","style","setStyle","createSignal","position","top","left","width","refSelf","updatePosition","computePosition","anchor","middleware","shift","flip","prevStyle","x","y","cleanup","onCleanup","createEffect","autoUpdate","undefined","show","Boolean","src","isImage","match","REG_IMAGE","_tmpl$","_$use","_$insert","_$memo","_tmpl$2","_$className","_$effect","descr","display","class","generic","_$style","_$classList","Tab","name","selected","pos","styles","border","fontWeight","Tabs","isSelected","createSelector","selectedPos","e","onSelect","parseInt","currentTarget","value","ref","_$createComponent","facePackages","item","index","bgWhiteBlur","Indicator","prop","level","otherProp","splitProps","_$spread","_$mergeProps","styleSetting","svg","FaceView","loaded","setLoaded","error","setError","handleError","handleLoad","local","forwardProp","context","useContext","SelectorContext","face","url","publicProp","onClick","select","bind","onPointerEnter","inspect","onPointerOut","hidden","onError","id","transition","mergeProps","FaceViewVideoAutoPlay","timer","forward","clearTimeout","paused","onCanPlay","requestIdleCallback","document","contains","play","timeout","styleItem","padding","styleGrid","overflow","minHeight","flex","FlexboxView","facePackage","faces","main","maxHeight","mainHeight","styleInner","flexDirection","createFaceSelector","inspecting","FaceSelector","_nowPackagePos","setPos","nowPackagePos","maxPos","facePacks","length","_now","loadContent","borderShadow","deployRenderer","render","createFaceRenderer","setStyleSetting","defaultStyle","querySelectorAll","forEach","deploySelector","emotionBox","commentArea","querySelector","hide","setHide","setLoadContent","pack","getElementById","addEventListener","prev","peak","createElement","body","append","imgCaption"],"mappings":"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"}